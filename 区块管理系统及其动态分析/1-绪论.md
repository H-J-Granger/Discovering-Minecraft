---
title: 1.14+区块管理系统及其动态分析绪论
date: false
keywords: Minecraft, 区块, 加载, 管理, lovexyn0827
desc: 目前社区内对1.14+区块加载的论述多集中于对稳定态的分析，而动态分析就少之又少，例如，我们都知道下界传送门加载器会加载目标维度中3 x 3的区块，但是这些区块是瞬间被加载还是在多个gt后才被加载却很少被提及。同时，区块管理是Minecraft中一个比较重要而又相当复杂的系统，与Minecraft的多个方面都息息相关，对其进行深入的研究有极大的潜在应用价值。
id: chunk_system:1
draft: true
---

# 绪论

## 研究背景与意义

一直以来，社区内对1.14+区块加载的论述多集中于对稳定态的分析，而动态分析却少之又少。例如，我们都知道下界传送门加载器会加载目标维度中3 x 3的区块，但是这些区块是瞬间被加载还是在多个gt后才被加载却很少被提及。同时，区块管理是Minecraft中一个比较重要而又相当复杂的系统，与Minecraft的多个方面都息息相关，对其进行深入的研究有极大的潜在应用价值。

本文旨在增强读者对区块管理系统的底层工作模式的理解，帮助读者了解源码组织结构，进而发掘出更多基于区块管理机制的创造性应用。

## 研究环境与辅助工具

该研究主要在Minecraft Java Edition 1.16.4与1.20.1下进行，并主要用到了以下几个辅助Mod：

- fabric-carpet 1.4.44+v210714
- TIS Carpet Addition v1.50.1
- MiniHUD 0.19.0-dev.20210917.191825
- Tweakroo 0.10.0-dev.20210917.191839
- Litematica 0.0.0-dev.20210917.192300
- Malilib 0.10.0-dev.21+arne.8
- MessMod 0.6.1+v20230907-BETA
- ChunkMap v20230404

所需源代码使用了以下混淆映射表：

- yarn 1.16.4+build.1
- yarn 1.20.1+build.1

无特殊说明时，以yarn 1.16.4+build.1中名称为准。

## 研究历程概要

- 2021年：对区块管理系统的整体架构形成初步认识
- 2023年4月中旬至9月初：对区块管理的异步任务处理进行进一步研究

## 本文的基本结构

- 第二节以极其简短的篇幅对区块加载系统中的几项基本概念进行了介绍
- 第三节从源码与抽象结构两个层面对区块管理系统中的几个部分及其运作与协作方式进行了简要论述，主要用于辅助读者分析源码结构。
- 第四节进一步讲解了`ServerChunkManager.MainThreadExecutor`中主线程异步任务的分派与处理方式，是对区块管理进行动态分析的基础。
- 第五节重点讲解了区块加载票的用途与管理方式。
- 第六节结合上文的叙述，对区块管理系统作为一个系统的运作模式进行了较为整体的总结，是本文较为核心的内容。
- 第七节运用上文中给出的信息，对区块管理中的一些现象进行动态的分析，并给出了部分现象可能的应用。
- 附录I中包含为方便排版未包含在正文部分的大段代码，仅作为一个参考。

## 本文所需的知识储备

本文假定读者已对Minecraft中常见的基本概念有一定了解，第二章还要求读者了解Java的基本语法。

## 一些特殊约定

为了不致混淆，在此给出本文中的一些特殊规定：

- 模块指一个在整个维度中唯一的对象，通常对应一个Java类，有时也会被用来指代一个较为独立的子系统。
- 单独的“加载”不指代通常意义上的可访问、弱加载或强加载这些状态或使区块进入这些状态的过程，而是指代区块存在于内存中的状态以及区块被从磁盘中加载到内存中的过程。
- 文中的距离通常指切比雪夫距离，而不是通常意义上的直线距离。